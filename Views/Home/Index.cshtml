@using WellnessTracker.Models
@{
    ViewData["Title"] = "Dashboard";
    var date = ViewBag.SelectedDate as string;
    var profile = ViewBag.UserProfile as UserProfile;
}

<h1>Dashboard</h1>

@if (profile != null)
{
    <div>
        <h3>Hello, @profile.Name!</h3>
        <h4>Your Profile</h4>
        <p><strong>Age:</strong> @profile.Age</p>
        <p><strong>Height (inches):</strong> @profile.HeightIn</p>
        <p><strong>Weight (lbs):</strong> @profile.WeightLb</p>

        <a class="btn btn-primary" href="@Url.Action("Edit", "UserProfile", new { id = profile.Id })">Edit Profile</a>
    </div>
}
else
{
    <p>No profile found. Please <a href="@Url.Action("Create", "UserProfile")">create your profile</a>.</p>
}

<h3>Recommended vs Set Daily Goals</h3>

<table class="table table-bordered w-75">
    <thead>
        <tr>
            <th>Category</th>
            <th>Recommended</th>
            <th>Your Set Goal</th>
            <th>Edit Goal</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><strong>Calories</strong></td>
            <td>
                @if (ViewBag.RecommendedCalories != null)
                {
                    @($"{ViewBag.RecommendedCalories} kcal")
                }
                else
                {
                    <span class="text-muted">No recommendation</span>
                }
            </td>
            <td>
                @if (ViewBag.CalorieGoal != null)
                {
                    @($"{ViewBag.CalorieGoal} kcal")
                }
                else
                {
                    <span class="text-muted">No goal set</span>
                }
            </td>
            <td>
                <a class="btn btn-sm btn-primary" href="@Url.Action("SetGoal", "CalorieLogEntries")">Edit Calorie Goal</a>
            </td>
        </tr>
        <tr>
            <td><strong>Sleep</strong></td>
            <td>
                @if (ViewBag.RecommendedSleep != null)
                {
                    @($"{ViewBag.RecommendedSleep} hrs")
                }
                else
                {
                    <span class="text-muted">No recommendation</span>
                }
            </td>
            <td>
                @if (ViewBag.SleepGoal != null)
                {
                    @($"{ViewBag.SleepGoal} hrs")
                }
                else
                {
                    <span class="text-muted">No goal set</span>
                }
            </td>
            <td>
                <a class="btn btn-sm btn-primary" href="@Url.Action("SetGoal", "SleepLogEntries")">Edit Sleep Goal</a>
            </td>
        </tr>
        <tr>
            <td><strong>Workout</strong></td>
            <td>
                @if (ViewBag.RecommendedWorkout != null)
                {
                    @($"{ViewBag.RecommendedWorkout} min")
                }
                else
                {
                    <span class="text-muted">No recommendation</span>
                }
            </td>
            <td>
                @if (ViewBag.WorkoutGoal != null)
                {
                    @($"{ViewBag.WorkoutGoal} min")
                }
                else
                {
                    <span class="text-muted">No goal set</span>
                }
            </td>
            <td>
                <a class="btn btn-sm btn-primary" href="@Url.Action("SetGoal", "WorkoutLogEntries")">Edit Workout Goal</a>
            </td>
        </tr>
    </tbody>
</table>

<form method="get" class="mb-4">
    <label for="date">Select a date:</label>
    <input type="date" name="date" id="date" value="@date" />
    <button type="submit" class="btn btn-primary">Go</button>
</form>

<div class="row">
    <div class="col-md-4 mb-3">
        <a href="@Url.Action("Index", "CalorieLogEntries")" class="text-decoration-none">
            <div class="card border-info h-100">
                <div class="card-body">
                    <h5 class="card-title">Calories Consumed Today</h5>
                    <p class="card-text"><strong>@ViewBag.TotalCalories</strong> kcal</p>
                    <small class="text-muted">Click here to view tracker</small>
                </div>
            </div>
        </a>
    </div>

    <div class="col-md-4 mb-3">
        <a href="@Url.Action("Index", "SleepLogEntries")" class="text-decoration-none">
            <div class="card border-success h-100">
                <div class="card-body">
                    <h5 class="card-title">Sleep Duration Today</h5>
                    <p class="card-text"><strong>@ViewBag.TotalSleep</strong> hours</p>
                    <small class="text-muted">Click here to view tracker</small>
                </div>
            </div>
        </a>
    </div>

    <div class="col-md-4 mb-3">
        <a href="@Url.Action("Index", "WorkoutLogEntries")" class="text-decoration-none">
            <div class="card border-warning h-100">
                <div class="card-body">
                    <h5 class="card-title">Workout Duration Today</h5>
                    <p class="card-text"><strong>@ViewBag.TotalWorkoutMinutes</strong> min</p>
                    <small class="text-muted">Click here to view tracker</small>
                </div>
            </div>
        </a>
    </div>

    <div class="col-md-4 mb-3">
        <a href="@Url.Action("Index", "WorkoutLogEntries")" class="text-decoration-none">
            <div class="card border-danger h-100">
                <div class="card-body">
                    <h5 class="card-title">Workout Calories Burned Today</h5>
                    <p class="card-text"><strong>@ViewBag.TotalWorkoutCalories</strong> kcal</p>
                    <small class="text-muted">Click here to view tracker</small>
                </div>
            </div>
        </a>
    </div>

    <div class="col-md-4 mb-3">
        <a href="@Url.Action("Index", "HabitEntries")" class="text-decoration-none">
            <div class="card border-primary h-100">
                <div class="card-body">
                    <h5 class="card-title">Habit Progress Today</h5>
                    <p class="card-text">
                        @ViewBag.HabitsCompleted / @ViewBag.TotalHabits habits completed
                    </p>
                    <small class="text-muted">Click here to view tracker</small>
                </div>
            </div>
        </a>
    </div>

    <div class="col-md-4 mb-3">
        <a href="@Url.Action("Index", "MoodEntries")" class="text-decoration-none">
            <div class="card border-secondary h-100">
                <div class="card-body">
                    <h5 class="card-title">Mood Today</h5>
                    <p class="card-text">
                        @if (ViewBag.MoodRating != null)
                        {
                            <span>Mood rating: @ViewBag.MoodRating</span>
                            @if (ViewBag.MoodNote != null)
                            {
                                <br />
                                <small class="text-muted">"@ViewBag.MoodNote"</small>
                            }
                        }
                        else
                        {
                            <span class="text-muted">No mood recorded for this day</span>
                        }
                    </p>
                    <small class="text-muted">Click here to view tracker</small>
                </div>
            </div>
        </a>
    </div>
</div>
